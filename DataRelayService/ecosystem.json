/**
 * How to use:
 * 1) Install pm2
 * 2) Move script to a directory where your service will live
 * 3) (First-time only) run: pm2 deploy <environment> setup
 * 4) (First-time only)Run: pm2 deploy <environment>
 * 5) Run: pm2 deploy <environment> update
 */
{
  /**
   * Application configuration section
   * http://pm2.keymetrics.io/docs/usage/application-declaration/
   */
  "apps": [
    {
      "name": "DataRelayService",
      "script": "app.js",
      "env": {
        "COMMON_VARIABLE": "true"
      },
      "env_production": {
        "NODE_ENV": "production",
        "PORT": 3000
      }
    }
  ],

  /**
   * Deployment section
   * http://pm2.keymetrics.io/docs/usage/deployment/
   */
  "deploy": {
    "production": {
      "user": "cryptoBoi",
      "host": "ec2-54-164-254-145.compute-1.amazonaws.com",
      "ref": "origin/DataRelayService",
      "repo": "-b DataRelayService git@github.com:hackerbuddy/CryptoBot.git",
      "path": "/home/cryptoBoi/DataRelayService/",
      "pre-setup": "git init",
      "post-deploy": "npm --prefix ./DataRelayService install && pm2 startOrRestart ../ecosystem.json --env production"
    }
  }
}
